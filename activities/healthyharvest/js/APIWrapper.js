var debug=!0,output=window.console,_NoError={code:"0",string:"No Error",diagnostic:"No Error"},_GeneralException={code:"101",string:"General Exception",diagnostic:"General Exception"},initialized=!1,apiHandle=null;function doLMSInitialize(){if(initialized)return"true";var e=getAPIHandle();if(null==e)return message("Unable to locate the LMS's API Implementation.\nLMSInitialize was not successful."),"false";var t=e.LMSInitialize("");return"true"!=t.toString()?message("LMSInitialize failed with error code: "+ErrorHandler().code):initialized=!0,t.toString()}function doLMSFinish(){if(!initialized)return"true";var e=getAPIHandle();if(null==e)return message("Unable to locate the LMS's API Implementation.\nLMSFinish was not successful."),"false";var t=e.LMSFinish("");return"true"!=t.toString()&&message("LMSFinish failed with error code: "+ErrorHandler().code),initialized=!1,t.toString()}function doLMSGetValue(e){var t=getAPIHandle(),n="";if(null==t)message("Unable to locate the LMS's API Implementation.\nLMSGetValue was not successful.");else if(initialized||doLMSInitialize()){n=t.LMSGetValue(e);var r=ErrorHandler();r.code!=_NoError.code&&(message("LMSGetValue("+e+") failed. \n"+r.code+": "+r.string),n="")}else message("LMSGetValue failed - Could not initialize communication with the LMS - error code: "+ErrorHandler().code);return n.toString()}function doLMSSetValue(e,t){var n=getAPIHandle(),r="false";if(null==n)message("Unable to locate the LMS's API Implementation.\nLMSSetValue was not successful.");else if(initialized||doLMSInitialize())"true"!=(r=n.LMSSetValue(e,t)).toString()&&message("LMSSetValue("+e+", "+t+") failed. \n"+(o=ErrorHandler()).code+": "+o.string);else{var o;message("LMSSetValue failed - Could not initialize communication with the LMS - error code: "+(o=ErrorHandler()).code)}return r.toString()}function doLMSCommit(){var e=getAPIHandle(),t="false";return null==e?message("Unable to locate the LMS's API Implementation.\nLMSCommit was not successful."):initialized||doLMSInitialize()?"true"!=(t=e.LMSCommit(""))&&message("LMSCommit failed - error code: "+ErrorHandler().code):message("LMSCommit failed - Could not initialize communication with the LMS - error code: "+ErrorHandler().code),t.toString()}function doLMSGetLastError(){var e=getAPIHandle();return null==e?(message("Unable to locate the LMS's API Implementation.\nLMSGetLastError was not successful."),_GeneralException.code):e.LMSGetLastError().toString()}function doLMSGetErrorString(e){var t=getAPIHandle();return null==t?(message("Unable to locate the LMS's API Implementation.\nLMSGetErrorString was not successful."),_GeneralException.string):t.LMSGetErrorString(e).toString()}function doLMSGetDiagnostic(e){var t=getAPIHandle();return null==t?(message("Unable to locate the LMS's API Implementation.\nLMSGetDiagnostic was not successful."),"Unable to locate the LMS's API Implementation. LMSGetDiagnostic was not successful."):t.LMSGetDiagnostic(e).toString()}function ErrorHandler(){var e={code:_NoError.code,string:_NoError.string,diagnostic:_NoError.diagnostic},t=getAPIHandle();return null==t?(message("Unable to locate the LMS's API Implementation.\nCannot determine LMS error code."),e.code=_GeneralException.code,e.string=_GeneralException.string,e.diagnostic="Unable to locate the LMS's API Implementation. Cannot determine LMS error code.",e):(e.code=t.LMSGetLastError().toString(),e.code!=_NoError.code&&(e.string=t.LMSGetErrorString(e.code),e.diagnostic=t.LMSGetDiagnostic("")),e)}function getAPIHandle(){return null==apiHandle&&(apiHandle=getAPI()),apiHandle}function findAPI(e){for(var t=0;null==e.API&&null!=e.parent&&e.parent!=e;){if(++t>7)return message("Error finding API -- too deeply nested."),null;e=e.parent}return e.API}function getAPI(){var e=findAPI(window);return null==e&&null!=window.opener&&void 0!==window.opener&&(e=findAPI(window.opener)),null==e&&message("Unable to find an API adapter"),e}function message(e){debug&&output.log(e)}